<!DOCTYPE html>
<html lang="mn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>urtuuch.mn</title>
    <link rel="icon" type="image/png" href="https://wpotnvekaoosdkvmhqgo.supabase.co/storage/v1/object/public/news_images/1765287786830_37k2pwz.png">
    
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;700&display=swap" rel="stylesheet">
    <style>
        /* ---------------------------------------------------------------------- */
        /* –ï–†”®–ù–•–ò–ô –°–¢–ò–õ–¨ */
        /* ---------------------------------------------------------------------- */
        body{font-family:'Ubuntu',sans-serif; margin:0; padding:0; background:#f0f5f5; color:#333;}
        header{background:#fff; padding:10px 15px; position:sticky; top:0; box-shadow:0 2px 10px rgba(0,0,0,0.1); z-index:100; display:flex; flex-direction:column;}
        .search-box input{width:100%; padding:8px 12px; border-radius:8px; border:1px solid #ccc; margin:10px 0; font-size:14px; box-sizing:border-box;}
        
        /* –õ–û–ì–û–ù–´ –°–¢–ò–õ–¨ */
        .logo-container img {
            max-height: 40px; 
            margin: 10px 0;
            object-fit: contain; 
            width: auto;
        }

        nav {background:#3d85c6; display:flex; flex-wrap:wrap; padding:10px;}
        nav ul {list-style:none; margin:0; padding:0; display:flex; flex-wrap:wrap;}
        nav ul li {position:relative; margin-right:20px;}
        nav ul li a {color:#fff; text-decoration:none; padding:8px 12px; display:block; font-weight:bold; border-radius:6px; transition: background 0.3s ease;}
        nav ul li:hover > a {background:#6fa8dc;}
        nav ul li ul {display:none; position:absolute; top:100%; left:0; background:#6fa8dc; list-style:none; padding:0; margin:0; border-radius:6px; min-width:180px; z-index:100;}
        nav ul li:hover ul {display:block;}
        nav ul li ul li a {padding:8px 12px; color:#fff; text-decoration:none; display:block;}
        nav ul li ul li a:hover {background:#3d85c6;}
        
        /* --------------------------------------------------- */
        /* –ú–≠–î–≠–≠–ù–ò–ô GRID –ë–û–õ–û–ù –ö–ê–†–¢–´–ù –ó–ê–ì–í–ê–† (–ó—É—Ä–∞–≥ –î–∞–≤—Ö–∞—Ä–ª–∞—Ö) */
        /* --------------------------------------------------- */

        /* –≠–Ω—ç grid class –Ω—å –∑”©–≤—Ö”©–Ω –ê–Ω–≥–∏–ª–ª—ã–Ω —Ö—É—É–¥—Å–∞–Ω–¥ (Sidebar-–≥“Ø–π) –∞—à–∏–≥–ª–∞–≥–¥–∞–Ω–∞ */
        .grid{
            display:grid; 
            grid-template-columns: repeat(4, 1fr); 
            gap:15px; 
            padding: 15px; /* –ê–Ω–≥–∏–ª–ª—ã–Ω —Ö—É—É–¥–∞—Å–Ω—ã padding */
        }
        
        /* –ï–†”®–ù–•–ò–ô –ö–ê–†–¢–´–ù –ó–ê–ì–í–ê–†: –ó—É—Ä–∞–≥ –¥—ç—ç—Ä –¥–∞–≤—Ö–∞—Ä–ª–∞—Ö */
        .card{
            cursor:pointer; 
            border-radius:6px; 
            overflow:hidden; 
            box-shadow:0 3px 10px rgba(0,0,0,0.08); 
            position:relative; /* –ì–æ–ª –∫–∞—Ä—Ç, –±—É—Å–∞–¥ –∫–æ–Ω—Ç–µ–Ω—Ç—ã–≥ “Ø“Ø–Ω–¥ —Ö–∞—Ä—å—Ü–∞–Ω–≥—É–π –±–∞–π—Ä–ª—É—É–ª–Ω–∞ */
            transition: transform 0.3s ease-in-out, box-shadow 0.3s ease-in-out; 
            background:#fff; 
            text-decoration: none; 
            color: inherit;
            border: 1px solid #eee; 
            display: block; 
            min-height: 250px; /* –ö–∞—Ä—Ç–Ω—ã –Ω–∏–π—Ç ”©–Ω–¥”©—Ä */
        }
        .card:hover{
            transform:translateY(-3px); 
            box-shadow:0 8px 20px rgba(0,0,0,0.15); 
        }
        
        /* –ó–£–†–ì–ò–ô–ù –ó–ê–ì–í–ê–†: –ë“Ø—Ç—ç–Ω ”©—Ä–≥”©–Ω”©”©—Ä, –ö–∞—Ä—Ç—ã–Ω “Ø–Ω–¥—Å—ç–Ω ”©–Ω–¥—Ä–∏–π–≥ –¥“Ø“Ø—Ä–≥—ç–Ω—ç */
        .card img{
            width:100%; 
            height:100%; /* –ó—É—Ä–∞–≥ –∫–∞—Ä—Ç—ã–Ω ”©–Ω–¥—Ä–∏–π–≥ (min-height: 250px) –¥“Ø“Ø—Ä–≥—ç–Ω—ç */
            object-fit:cover; /* –ó—É—Ä–∞–≥ –∫–∞—Ä—Ç—ã–Ω —Ö—ç–º–∂—ç—ç–Ω–¥ –¥“Ø“Ø—Ä—ç–Ω –æ—Ä–Ω–æ */
            filter: brightness(0.8); /* –¢–µ–∫—Å—Ç–∏–π–≥ —Ç–æ–¥ —Ö–∞—Ä–∞–≥–¥—É—É–ª–∞—Ö—ã–Ω —Ç—É–ª–¥ –±–∞–≥–∞ –∑—ç—Ä—ç–≥ –±–∞—Ä–∞–∞–Ω –±–æ–ª–≥–æ–Ω–æ */
            transition: filter 0.3s ease;
            position: absolute; /* –ó—É—Ä–≥–∏–π–≥ –∞—Ä–¥ –±–∞–π—Ä–ª—É—É–ª–Ω–∞ */
            top: 0;
            left: 0;
            z-index: 1; /* –ó—É—Ä–≥–∏–π–≥ –∫–æ–Ω—Ç–µ–Ω—Ç—ã–Ω –∞—Ä–¥ –±–∞–π—Ä–ª—É—É–ª–Ω–∞ */
        }

        .card:hover img {
            filter: brightness(0.65);
        }
        
        /* –ö–û–ù–¢–ï–ù–¢–´–ì –î–ê–í–•–ê–†–õ–ê–• (OVERLAY) - –®–ò–ù–≠–ß–ò–õ–°–≠–ù */
        .card-content{
            padding:15px; 
            position:absolute; /* –ó—É—Ä–∞–≥ –¥—ç—ç—Ä –¥–∞–≤—Ö–∞—Ä–ª–∞–Ω–∞ */
            bottom:0; /* –ö–∞—Ä—Ç—ã–Ω –¥–æ–æ–¥ —Ö—ç—Å—ç–≥—Ç –±–∞–π—Ä–ª—É—É–ª–Ω–∞ */
            left: 0;
            width: 100%;
            color: #fff; /* –¢–µ–∫—Å—Ç–Ω–∏–π ”©–Ω–≥”© —Ü–∞–≥–∞–∞–Ω */
            z-index: 2; /* –ó—É—Ä–≥–∏–π–Ω ”©–º–Ω”© –±–∞–π—Ä–ª—É—É–ª–Ω–∞ */
            /* üí° –®–ò–ù–≠–ß–õ–≠–õ–¢: –î–æ–æ—Ä–æ–æ—Å –¥—ç—ç—à —Ö–∞—Ä–ª—É—É–ª–∞—Ö —Ñ–æ–Ω—Ç–Ω—ã ”©–Ω–¥—Ä–∏–π–≥ 35% –±–æ–ª–≥–æ–∂ —Ö—è–∑–≥–∞–∞—Ä–ª–∞–Ω–∞ */
            background: linear-gradient(to top, rgba(0,0,0,0.85) 35%, rgba(0,0,0,0) 50%); 
            box-sizing: border-box;
            /* üí° –®–ò–ù–≠–ß–õ–≠–õ–¢: –ö–æ–Ω—Ç–µ–Ω—Ç—ã–Ω –º–∏–Ω–∏–º–∞–ª ”©–Ω–¥—Ä–∏–π–≥ –±–∞–≥–∞—Å–≥–∞–Ω–∞ */
            min-height: 35px; 
            max-height: 100%;
        }
        .card-title{
            /* üí° –®–ò–ù–≠–ß–õ–≠–õ–¢: –ì–∞—Ä—á–≥–∏–π–Ω —Ñ–æ–Ω—Ç–Ω—ã —Ö—ç–º–∂—ç—ç–≥ –∂–∏–∂–∏–≥—Ä“Ø“Ø–ª–Ω—ç */
            font-size:16px; 
            margin:0; 
            font-weight:bold;
            line-height: 1.3;
        }
        .card-meta{font-size:12px; color:#ddd; margin-top:5px; display:flex; justify-content:space-between; flex-wrap:wrap;}
        .card-meta span.category{background:#3d85c6; color:#fff; padding:2px 8px; border-radius:6px; font-size:12px;}
        .card-author{display:none; /* –î–∞–≤—Ö–∞—Ä–ª–∞–∂ –±–∞–π–≥–∞–∞ “Ø–µ–¥ –Ω—É—É—Ö */ }

        .sub-featured-card {
            grid-column: span 2; 
        }
        .sub-featured-card .card-title {
            font-size: 20px;
        }

        /* --------------------------------------------------- */
        /* –û–ù–¶–õ–û–• –ú–≠–î–≠–≠–ù–ò–ô –ó–ê–ì–í–ê–† (Featured Block) –®–ò–ù–≠–ß–õ–≠–õ–¢ */
        /* --------------------------------------------------- */
        
        /* Featured block-–∏–π–≥ grid-—ç—ç—Ä “Ø—Ä–≥—ç–ª–∂–ª“Ø“Ø–ª–Ω—ç (–ù—ç–≥ –±–∞–≥–∞–Ω–∞–¥ –Ω—ç–≥ –∫–∞—Ä—Ç) */
        .featured-block-container {
            grid-column: 1 / -1; 
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* 4 –±–∞–≥–∞–Ω–∞—Ç–∞–π grid-–∏–π–≥ –∞—à–∏–≥–ª–∞–Ω–∞ */
            gap: 15px;
            margin-bottom: 25px;
            padding: 15px;
            background: #f0f5f5; 
            border-radius: 12px;
            box-shadow: none; 
            position: relative;
        }

        /* "–®–£–£–†–•–ê–ô" –≥–∞—Ä—á–∏–≥ */
        .featured-block-container::before {
            content: "–®–£–£–†–•–ê–ô";
            position: absolute;
            top: 0; 
            left: 15px;
            background: #d9534f;
            color: #fff;
            padding: 5px 15px;
            border-radius: 8px 8px 0 0; 
            font-weight: bold;
            font-size: 14px;
            z-index: 10;
        }

        /* 1. –ó“Ø“Ø–Ω —Ç–∞–ª—ã–Ω –¢–û–ú –ú—ç–¥—ç—ç (Featured Main) - 2 –±–∞–≥–∞–Ω–∞ —ç–∑—ç–ª–Ω—ç */
        .featured-main-card {
            grid-column: span 2; /* 4 –±–∞–≥–∞–Ω–∞–∞—Å 2-–∏–π–≥ —ç–∑—ç–ª–Ω—ç */
            min-height: 350px; /* –¢–û–ú –∫–∞—Ä—Ç—ã–Ω ”©–Ω–¥”©—Ä */
            
            /* –≠–Ω–≥–∏–π–Ω –∫–∞—Ä—Ç—ã–Ω —Å—Ç–∏–ª–∏–π–≥ –∞—à–∏–≥–ª–∞–Ω–∞ (overlay, position: relative –≥.–º.) */
            border: none; 
            box-shadow: 0 3px 10px rgba(0,0,0,0.08); 
            border-radius: 6px; 
            overflow: hidden; 
            position: relative;
            background: #fff;
            text-decoration: none; 
            color: inherit;
        }
        
        .featured-main-card img {
            width: 100%;
            height: 100%; /* –ö–∞—Ä—Ç—ã–Ω min-height-–∏–π–≥ –¥“Ø“Ø—Ä–≥—ç–Ω—ç */
            object-fit: cover;
            filter: brightness(0.75);
            position: absolute;
            top: 0;
            left: 0;
            z-index: 1;
        }

        .featured-main-card .card-content {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            color: #fff; 
            padding: 15px;
            /* üí° –®–ò–ù–≠–ß–õ–≠–õ–¢: –ö–æ–Ω—Ç–µ–Ω—Ç—ã–Ω –º–∏–Ω–∏–º–∞–ª ”©–Ω–¥—Ä–∏–π–≥ –±–∞–≥–∞—Å–≥–∞–Ω–∞ */
            min-height: 35px; 
            /* üí° –®–ò–ù–≠–ß–õ–≠–õ–¢: –•–∞—Ä–ª—É—É–ª–∞—Ö —Ñ–æ–Ω—Ç–Ω—ã ”©–Ω–¥—Ä–∏–π–≥ 35% –±–æ–ª–≥–æ–∂ —Ö—è–∑–≥–∞–∞—Ä–ª–∞–Ω–∞ */
            background: linear-gradient(to top, rgba(0,0,0,0.85) 35%, rgba(0,0,0,0) 50%); 
            box-sizing: border-box;
            z-index: 2;
        }
        .featured-main-card .card-title {
            /* üí° –®–ò–ù–≠–ß–õ–≠–õ–¢: –ì–∞—Ä—á–≥–∏–π–Ω —Ñ–æ–Ω—Ç–Ω—ã —Ö—ç–º–∂—ç—ç–≥ –±–∞–≥–∞—Å–≥–∞–Ω–∞ */
            font-size: 18px; 
            margin-bottom: 5px;
            font-weight: bold;
        }
        .featured-main-card .card-meta {
            color: #eee;
            margin-top: 5px;
        }
        .featured-main-card .card-meta span.category {
            background: #e74c3c; 
            padding: 5px 10px;
            font-size: 14px;
        }
        .featured-main-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        }

        /* 2. –ë–∞—Ä—É—É–Ω —Ç–∞–ª—ã–Ω –ñ–∏–∂–∏–≥ –ú—ç–¥—ç—ç–Ω–∏–π –°–∞–º–±–∞—Ä (Featured Sidebar) - 2 –±–∞–≥–∞–Ω–∞ —ç–∑—ç–ª–Ω—ç */
        .featured-sidebar {
            grid-column: span 2; /* 4 –±–∞–≥–∞–Ω–∞–∞—Å 2-–∏–π–≥ —ç–∑—ç–ª–Ω—ç */
            display: grid;
            grid-template-columns: 1fr 1fr; /* 2 –∫–∞—Ä—Ç—ã–Ω –¥—ç–¥ grid */
            gap: 15px; /* –ö–∞—Ä—Ç—É—É–¥—ã–Ω —Ö–æ–æ—Ä–æ–Ω–¥—ã–Ω –∑–∞–π */
        }
        
        .featured-sidebar .card {
            /* –ñ–∏–∂–∏–≥ –∫–∞—Ä—Ç—É—É–¥ —ç–Ω–≥–∏–π–Ω –∫–∞—Ä—Ç—ã–Ω –∑–∞–≥–≤–∞—Ä—Ç–∞–π –∏–∂–∏–ª –±–∞–π–Ω–∞ (–î–∞–≤—Ö–∞—Ä–ª–∞—Å–∞–Ω) */
            min-height: 167.5px; /* (350px - 15px gap) / 2 = 167.5px */
            box-shadow: 0 3px 10px rgba(0,0,0,0.08); 
            border: none;
        }
        
        /* Featured sidebar-—Ç –∑—É—Ä–∞–≥ –¥“Ø“Ø—Ä—ç–Ω, —Ç–µ–∫—Å—Ç –¥–æ–æ—Ä –¥–∞–≤—Ö–∞—Ä–ª–∞–Ω–∞ */
        .featured-sidebar .card img {
            filter: brightness(0.85); 
            height: 100%; 
        }
        
        .featured-sidebar .card .card-content {
            padding: 10px;
            min-height: 60px;
        }
        
        .featured-sidebar .card .card-title {
            /* üí° –®–ò–ù–≠–ß–õ–≠–õ–¢: –ñ–∏–∂–∏–≥ –∫–∞—Ä—Ç—ã–Ω —Ñ–æ–Ω—Ç–Ω—ã —Ö—ç–º–∂—ç—ç–≥ –±–∞–≥–∞—Å–≥–∞–Ω–∞ */
            font-size: 13px; 
            margin-bottom: 5px;
            line-height: 1.2;
        }
        .featured-sidebar .card .card-meta {
            margin-top: 5px;
            display: none; 
        }

        
        /* --------------------------------------------------- */
        /* –•–ê–ú–ì–ò–ô–ù –î–û–û–†–• –¢–û–ú –í–ò–î–ï–û –ö–ê–†–¢–ù–´ –ó–ê–ì–í–ê–† */
        /* --------------------------------------------------- */
        .video-card-bottom {
            grid-column: 1 / -1; 
            padding: 20px 15px; 
            margin: 20px 0;
            background: #fff;
            border-radius: 12px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
        }
        .video-card-bottom h3 {
            font-size: 24px;
            margin-bottom: 15px;
            color: #3d85c6;
            border-bottom: 2px solid #3d85c6;
            padding-bottom: 5px;
        }
        .video-card-bottom iframe {
            width: 100%; 
            height: 450px; 
            border: none; 
            border-radius: 12px;
        }
        
        /* ---------------------------------------------------------------------- */
        /* –ê–ù–ì–ò–õ–õ–´–ù –¢–ê–ë –°–¢–ò–õ–¨ (Category Tabs) */
        /* ---------------------------------------------------------------------- */
        .category-tabs {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }

        .tab-button {
            padding: 10px 15px;
            border: 1px solid #ccc;
            border-radius: 6px;
            background: #f0f0f0;
            cursor: pointer;
            font-weight: bold;
            transition: background 0.2s, color 0.2s;
            white-space: nowrap; 
        }

        .tab-button:hover {
            background: #e0e0e0;
        }

        .tab-button.active {
            background: #3d85c6;
            color: #fff;
            border-color: #3d85c6;
        }

        /* ---------------------------------------------------------------------- */
        /* SIDEBAR (–°“Ø“Ø–ª–∏–π–Ω “Ø–µ–∏–π–Ω –º—ç–¥—ç—ç) –ó–ê–ì–í–ê–† */
        /* ---------------------------------------------------------------------- */

        /* #allNewsSection-–∏–π–≥ 2 –±–∞–≥–∞–Ω–∞—Ç–∞–π –±–æ–ª–≥–æ–∂ —Ö—É–≤–∞–∞—Ö (–ì–æ–ª —Ö—É—É–¥–∞—Å) */
        #allNewsSection {
            display: grid !important; 
            grid-template-columns: 3fr 1fr; /* –ì–æ–ª –∫–æ–Ω—Ç–µ–Ω—Ç 3/4, Sidebar 1/4 —Ö—É–≤–∏–π–≥ —ç–∑—ç–ª–Ω—ç */
            gap: 20px;
            padding: 15px;
        }
        
        /* –ì–æ–ª –∫–æ–Ω—Ç–µ–Ω—Ç –±–æ–ª–æ–Ω Sidebar-—ã–Ω —Ç–æ—Ö–∏—Ä–≥–æ–æ */
        .main-content-area {
            grid-column: 1 / 2;
            display: grid;
            grid-template-columns: repeat(4, 1fr); /* –î–æ—Ç–æ—Ä—Ö –∫–∞—Ä—Ç—É—É–¥ 4 –±–∞–≥–∞–Ω–∞—Ç–∞–π —Ö—ç–≤—ç—ç—Ä */
            gap: 15px;
            align-content: start; 
        }

        /* SIDEBAR –ó–ê–ì–í–ê–†: –ó—É—Ä–∞–≥—Ç–∞–π */
        .sidebar-container {
            grid-column: 2 / 3;
            background: #fff; 
            padding: 15px;
            border-radius: 8px; 
            border: 1px solid #ddd; 
            box-shadow: 0 2px 10px rgba(0,0,0,0.05); 
            align-self: start; 
        }

        .sidebar-container h3 {
            font-size: 18px;
            color: #3d85c6;
            border-bottom: 3px solid #3d85c6; 
            padding-bottom: 8px;
            margin-top: 0;
            margin-bottom: 15px;
            font-weight: bold;
        }

        .latest-news-item {
            padding: 10px 0;
            border-bottom: 1px dashed #eee;
            transition: background 0.2s; 
            display: flex; 
            gap: 10px; 
            align-items: flex-start; 
            cursor: pointer;
        }
        .latest-news-item:last-child {
             border-bottom: none;
        }
        .latest-news-item:hover {
            background: #fcfcfc;
        }

        .sidebar-img-wrapper {
            flex-shrink: 0; 
            width: 70px; 
            height: 70px; 
            border-radius: 4px;
            overflow: hidden;
        }

        .sidebar-img-wrapper img {
            width: 100%;
            height: 100%;
            object-fit: cover; 
            display: block;
        }

        .sidebar-content-wrapper {
            flex-grow: 1; 
        }

        .latest-news-item a {
            text-decoration: none;
            color: #333;
            font-size: 13px; 
            font-weight: bold; 
            line-height: 1.4;
            display: block;
            transition: color 0.2s;
        }

        .latest-news-item a:hover {
            color: #e74c3c;
            text-decoration: underline;
        }

        .latest-news-item span {
            display: block;
            font-size: 11px;
            color: #999;
            margin-top: 3px;
        }
        
        /* ---------------------------------------------------------------------- */
        /* –¢–û–û–õ–£–£–†/–¢–ò–ö–ï–†/–¶–ê–ì –ê–ì–ê–ê–†–´–ù –ù–≠–ì–î–°–≠–ù –•–≠–°–≠–ì (HEADER WIDGETS) */
        /* ---------------------------------------------------------------------- */
        
        /* –ë“Ø—Ö –≤–∏–¥–∂–µ—Ç“Ø“Ø–¥–∏–π–≥ –∞–≥—É—É–ª—Å–∞–Ω –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä (–ù—ç–≥ —ç–≥–Ω—ç—ç–Ω–¥) */
        #header-widgets {
            display: flex; 
            flex-wrap: nowrap; /* –•—ç–≤–∏–π–Ω “Ø–µ–¥ –Ω—ç–≥ –º”©—Ä”©–Ω–¥ –±–∞–π–ª–≥–∞–Ω–∞ */
            gap: 10px; 
            margin: 10px 15px;
            align-items: center; 
            padding: 0; 
        }

        /* –¶–∞–≥ –∞–≥–∞–∞—Ä –±–∞ –û–≥–Ω–æ–æ/–¶–∞–≥ (Fixed Width) */
        #weatherContainer, #timeContainer {
            background: #497a9f; 
            color: #fff; 
            padding: 10px 15px; 
            border-radius: 8px; 
            text-align: center; 
            font-weight: bold; 
            font-size: 14px; /* –§–æ–Ω—Ç–Ω—ã —Ö—ç–º–∂—ç—ç–≥ –±–∞–≥–∞—Å–≥–∞–∂ –Ω—ç–≥ –º”©—Ä”©–Ω–¥ –±–∞–≥—Ç–∞–∞–Ω–∞ */
            flex-shrink: 0; 
            flex-basis: auto; 
        }
        /* üí° –®–ò–ù–≠–ß–õ–≠–õ–¢: –¶–∞–≥/–û–≥–Ω–æ–æ–≥ —Ö—É—Ä–¥–∞–Ω —à–∏–Ω—ç—á–ª—ç–≥–¥—ç–∂ –±–∞–π–≥–∞–∞ —Ç—É–ª –±–∞–≥–∞ –∑—ç—Ä—ç–≥ ”©—Ä–≥”©–Ω–∏–π–≥ –Ω—å —Ö—è–∑–≥–∞–∞—Ä–ª–∞–Ω–∞ */
        #timeContainer {
            min-width: 140px; 
        }
        
        /* –ú—ç–¥—ç—ç–Ω–∏–π Ticker-–∏–π–Ω –∑–∞–≥–≤–∞—Ä (Flex Grow) */
        #tickerContainer {
            flex-grow: 1; /* “Æ–ª–¥—Å—ç–Ω –∑–∞–π–≥ –±“Ø–≥–¥–∏–π–≥ –Ω—å —ç–∑—ç–ª–Ω—ç */
            background: #fff;
            color: #333;
            padding: 10px 15px;
            border-radius: 8px;
            overflow: hidden; /* –ì“Ø–π–ª–≥—ç—Ö —Ö—ç—Å—ç–≥ –≥–∞–¥–∞–≥—à –≥–∞—Ä–∞—Ö–≥“Ø–π */
            display: flex;
            align-items: center;
            white-space: nowrap; /* Ticker-–∏–π–Ω —Ç–µ–∫—Å—Ç–∏–π–≥ –Ω—ç–≥ –º”©—Ä”©–Ω–¥ –±–∞–π–ª–≥–∞—Ö */
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
            font-size: 14px; /* –ù—ç–≥ —ç–≥–Ω—ç—ç–Ω–¥ –±–∞–≥—Ç–∞–∞—Ö—ã–Ω —Ç—É–ª–¥ –±–∞–≥–∞—Å–≥–∞–≤ */
        }

        /* '–£–†–ò–ê–õ–ì–ê' —Ç—ç–º–¥—ç–≥–ª—ç–≥—ç—ç */
        #tickerContainer strong {
            background: #3d85c6; /* –¶—ç–Ω—Ö—ç—Ä ”©–Ω–≥”© */
            color: #fff;
            padding: 5px 10px;
            border-radius: 6px;
            margin-right: 15px;
            flex-shrink: 0;
            font-size: 14px;
        }

        /* Ticker-–∏–π–Ω –≥“Ø–π–ª–≥—ç—Ö —Ö—ç—Å—ç–≥ */
        #tickerContent {
            display: inline-block;
            animation: marquee 45s linear infinite; /* 45 —Å–µ–∫—É–Ω–¥—ç–¥ –Ω—ç–≥ —Ç–æ–π—Ä–æ–≥ (–£—Ä—Ç “Ø–≥ —Ç—É–ª —É–¥–∞–∞—à—Ä—É—É–ª—Å–∞–Ω) */
            padding-right: 100%; /* –¢”©–≥—Å–≥”©–ª–¥ –∑–∞–π “Ø–ª–¥—ç—ç—Ö */
            cursor: default; /* –£—Ä–∏–∞–ª–≥–∞ —Ç—É–ª —Ç–æ–≤—à–∏–ª—Ç–≥“Ø–π */
        }
        
        #tickerContent span {
            color: #333;
            text-decoration: none;
            margin-right: 80px; /* –•–æ–æ—Ä–æ–Ω–¥—ã–Ω –∑–∞–π–≥ –Ω—ç–º—ç–≥–¥“Ø“Ø–ª—Å—ç–Ω */
            font-weight: bold;
        }

        @keyframes marquee {
            0%   { transform: translate(0, 0); }
            100% { transform: translate(-100%, 0); }
        }
        
        /* –ì“Ø–π–ª—Ç–∏–π–≥ –∑–æ–≥—Å–æ–æ—Ö (Hover) */
        #tickerContainer:hover #tickerContent {
            animation-play-state: paused;
        }


        /* --------------------------------------------------- */
        /* –ë–£–°–ê–î –¢–£–°–õ–ê–• –ó–ê–ì–í–ê–†–£–£–î */
        /* --------------------------------------------------- */
        
        /* –ê–Ω–≥–∏–ª–∞–ª —Ç—É—Å –±“Ø—Ä–∏–π–≥ —Ö–∞—Ä—É—É–ª–∞—Ö/–Ω—É—É—Ö */
        .category-section {
            display: none; 
        }

        .category-section.active {
            display: block; 
        }

        .authors-container {display:flex; gap:10px; padding:15px; justify-content:center; flex-wrap:wrap; background:#fff; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.1); margin: 15px;}
        .author-card {flex:1 1 80px; max-width:120px; text-align:center; padding:10px; border-radius:8px; background:#fff; box-shadow:0 2px 8px rgba(0,0,0,0.1); transition: transform 0.2s;}
        .author-card:hover {transform: translateY(-2px); box-shadow:0 4px 12px rgba(0,0,0,0.15);}
        .author-card img {width:50px; height:50px; border-radius:50%; object-fit:cover;}
        .author-name{font-weight:bold; font-size:14px;}
        .author-title{font-size:12px; color:#555;}
        .pagination{display:flex; justify-content:center; gap:5px; margin:10px 0; flex-wrap:wrap;}
        .pagination button{padding:5px 10px; border-radius:5px; border:none; background:#6fa8dc; color:#fff; cursor:pointer; transition:0.3s;}
        .pagination button:hover{background:#3d85c6;}
        .contact{background:#fff; padding:15px 10px; text-align:center; margin:15px; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.1);}
        
        /* Modal */
        #newsModal {display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.6); justify-content:center; align-items:center; z-index:1000;}
        #newsModalContent {background:#fff; border-radius:12px; max-width:700px; width:90%; max-height:80%; overflow:auto; padding:25px; position:relative;}
        #newsModalClose {position:absolute; top:10px; right:15px; cursor:pointer; font-weight:bold; font-size:24px; color: #333;}
        #newsModalContent img#modalImage{width:100%; max-height:300px; object-fit:cover; border-radius:8px; margin-bottom:15px; display: block;} 
        #modalContent p, #modalContent h1, #modalContent h2, #modalContent h3 { line-height: 1.6; margin-bottom: 15px;}
        
        /* –ú–æ–¥–∞–ª—å –¥–æ—Ç–æ—Ä—Ö –≤–∏–¥–µ–æ–Ω—ã –∑–∞–≥–≤–∞—Ä */
        .modal-video-container {
            margin: 15px 0;
            background: #000;
            border-radius: 8px;
            overflow: hidden;
        }

        /* ---------------------------------------------------------------------- */
        /* –ì–ê–† –£–¢–ê–°–ù–´ –ó–ê–ì–í–ê–† (MEDIA QUERY) */
        /* ---------------------------------------------------------------------- */
        @media(max-width:992px){
            /* Ticker-–∏–π–≥ –±“Ø—Ç—ç–Ω ”©—Ä–≥”©–Ω –±–æ–ª–≥–æ—Ö */
            #header-widgets {
                flex-direction: column; /* –ë–æ—Å–æ–æ –±–∞–π—Ä–ª–∞–ª–¥ —à–∏–ª–∂–∏–Ω—ç */
                flex-wrap: wrap; 
                gap: 8px; /* –•–æ–æ—Ä–æ–Ω–¥—ã–Ω –∑–∞–π–≥ –±–∞–≥–∞—Å–≥–∞–Ω–∞ */
            }
            
            /* üí° –®–ò–ù–≠–ß–õ–≠–õ–¢: –¶–∞–≥ –∞–≥–∞–∞—Ä –±–æ–ª–æ–Ω –û–≥–Ω–æ–æ–≥ –±“Ø—Ç—ç–Ω ”©—Ä–≥”©–Ω –±–æ–ª–≥–æ–∂ —Ç–æ–º—Ä—É—É–ª–∞—Ö */
            #weatherContainer, #timeContainer {
                flex-basis: 100%; 
                width: 100%; 
                box-sizing: border-box; 
                font-size: 16px; 
                min-width: auto;
            }
            
            /* Ticker-–∏–π–≥ –¥–æ–æ–¥ —Ç–∞–ª–¥ –±“Ø—Ç—ç–Ω ”©—Ä–≥”©–Ω”©”©—Ä –±–∞–π—Ä–ª—É—É–ª–∞—Ö */
            #tickerContainer {
                width: 100%; 
                order: 3; /* –î–æ–æ–¥ —Ç–∞–ª–¥ –±–∞–π—Ä–ª—É—É–ª–∞—Ö */
                box-sizing: border-box;
                font-size: 14px;
                padding: 8px 10px;
            }
            
            /* ... –±—É—Å–∞–¥ featured block-–∏–π–Ω media query-“Ø“Ø–¥ ... */
            .featured-block-container {
                grid-template-columns: 2fr 2fr; 
            }
            .featured-main-card {
                grid-column: span 2; 
            }
            .featured-sidebar {
                grid-column: span 2;
                grid-template-columns: 1fr 1fr;
            }
            .video-card-bottom iframe {
                height: 350px;
            }
        }

        @media(max-width:768px){
            /* ... (”©–º–Ω”©—Ö media query-“Ø“Ø–¥ —Ö—ç–≤—ç—ç—Ä “Ø–ª–¥—ç–Ω—ç) ... */
            
            /* Ticker-–∏–π–≥ —É—Ç—Å–∞–Ω –¥—ç—ç—Ä –∑”©–≤—Ö”©–Ω –≥–∞—Ä—á–≥–∞–∞—Ä —Ö–∞—Ä—É—É–ª–∞—Ö */
             #tickerContainer {
                 font-size: 14px;
                 padding: 8px 10px;
             }
             #tickerContainer strong {
                 font-size: 12px;
                 padding: 3px 8px;
             }
            
            /* Sidebar-—Ç–∞–π “Æ–Ω–¥—Å—ç–Ω —Ö—É—É–¥–∞—Å (allNewsSection) */
            #allNewsSection {
                grid-template-columns: 1fr; /* –ù—ç–≥ –±–∞–≥–∞–Ω–∞—Ç–∞–π –±–æ–ª–≥–æ–Ω–æ */
                gap: 10px;
            }
            
            /* –ì–æ–ª –∫–æ–Ω—Ç–µ–Ω—Ç—ã–≥ –±“Ø—Ç—ç–Ω ”©—Ä–≥”©–Ω –±–æ–ª–≥–æ–Ω–æ */
            .main-content-area {
                grid-column: 1 / -1; 
                grid-template-columns: 1fr; /* –ö–∞—Ä—Ç –Ω—ç–≥ –±–∞–≥–∞–Ω–∞—Ç–∞–π (–±–æ—Å–æ–æ) */
                padding: 0 5px;
            }

            /* Sidebar-—ã–≥ –≥–æ–ª –∫–æ–Ω—Ç–µ–Ω—Ç—ã–Ω –¥–æ–æ—Ä –±–∞–π—Ä–ª—É—É–ª–Ω–∞ */
            .sidebar-container {
                grid-column: 1 / -1;
                margin: 10px 15px; 
                order: 3; 
            }
            
            #newsModalContent { max-width: 95%; max-height: 90%; }
        }
    </style>
</head>
<body>
<header>
    <a href="index.html" class="logo-container">
        <img src="https://wpotnvekaoosdkvmhqgo.supabase.co/storage/v1/object/public/news_images/1765287786830_37k2pwz.png" alt="urtuuch.mn –ª–æ–≥–æ">
    </a>
    
    <div class="search-box"><input type="text" placeholder="–•–∞–π—Ö —É—Ç–≥–∞ –æ—Ä—É—É–ª–Ω–∞ —É—É!" id="searchInput"></div>
    <nav>
        <ul>
            <li><a href="#">–£–ª—Å —Ç”©—Ä</a>
                <ul><li><a href="#">–¢–æ–π–º</a></li><li><a href="#">–ù–∏–π—Ç–ª—ç–ª</a></li><li><a href="#">–°—É—Ä–≤–∞–ª–∂–∏–ª–≥–∞</a></li><li><a href="#">”®—Ä—Ç”©”©—á–∏–π–Ω “Ø–≥</a></li><li><a href="#">–•–æ–≤ –±–æ–ª–æ—Ö –≤–∏–π</a></li></ul>
            </li>
            <li><a href="#">–≠–¥–∏–π–Ω –∑–∞—Å–∞–≥</a>
                <ul><li><a href="#">–£—É–ª —É—É—Ä—Ö–∞–π</a></li><li><a href="#">–î—ç–¥ –±“Ø—Ç—ç—Ü</a></li><li><a href="#">–ú–æ–Ω–≥–æ–ª–¥ “Ø–π–ª–¥–≤—ç—Ä–ª—ç–≤</a></li><li><a href="#">–ó–∞—Ä —Å—É—Ä—Ç–∞–ª—á–∏–ª–≥–∞–∞</a></li></ul>
            </li>
             <li><a href="#">–ù–∏–π–≥—ç–º</a>
                 <ul><li><a href="#">–°—É—Ä–≤–∞–ª–∂–∏–ª–≥–∞</a></li><li><a href="#">”®—Ä—Ç”©”©</a></li><li><a href="#">–¶–∞–≥ —Ç—É—Ö–∞–π–¥ –Ω—å</a></li><li><a href="#">–ê—è–Ω –∑–∞–º—ã–Ω —Ç—ç–º–¥—ç–≥–ª—ç–ª</a></li><li><a href="#">–≠—Ö –Ω—É—Ç–∞–≥—Ç</a></li></ul> 
            <li><a href="#">–°–æ—ë–ª —É—Ä–ª–∞–≥</a>
                <ul><li><a href="#">–Ø—Ä–∏–ª—Ü–ª–∞–≥–∞</a></li><li><a href="#">–°—É—Ä–≤–∞–ª–∂–∏–ª–≥–∞</a></li><li><a href="#">–ö–∏–Ω–æ –µ—Ä—Ç”©–Ω—Ü</a></li><li><a href="#">–£—Ç–≥–∞ –∑–æ—Ö–∏–æ–ª</a></li><li><a href="#">–°–æ—ë–ª —Å—É–¥–ª–∞–ª</a></li></ul>
            </li>
            <li><a href="#">–ú–µ–¥–∏–∞</a>
                <ul><li><a href="#">–ù—ç–≤—Ç—Ä“Ø“Ø–ª—ç–≥</a></li><li><a href="#">–ú—ç–¥—ç—ç</a></li><li><a href="#">–°—É—Ä–≤–∞–ª–∂–∏–ª–≥–∞</a></li><li><a href="#">MIC UP</a></li><li><a href="#">–ó—É—Ä–∞–≥–ª–∞–ª</a></li><li><a href="#">”®—Ä—Ç”©”©—á”©”©—Å</a></li></ul>
            </li>
             <li><a href="#">–°–ø–æ—Ä—Ç</a>
                 <ul><li><a href="#">–°—É—Ä–≤–∞–ª–∂–∏–ª–≥–∞</a></li><li><a href="#">–Ø—Ä–∏–ª—Ü–ª–∞–≥–∞</a></li><li><a href="#">–ú—ç–¥—ç—ç</a></li><li><a href="#">–ò—Ö —Å–ø–æ—Ä—Ç</a></li><li><a href="#">“Æ–Ω–¥—ç—Å–Ω–∏–π —Å–ø–æ—Ä—Ç</a></li><li><a href="#">–û—é—É–Ω —É—Ö–∞–∞–Ω—ã —Å–ø–æ—Ä—Ç</a></li></ul> 
            <li><a href="#">–î—ç–ª—Ö–∏–π –¥–∞—Ö–∏–Ω–¥</a>
                <ul><li><a href="#">–£–ª—Å —Ç”©—Ä</a></li><li><a href="#">–¢–∞–Ω–∏–Ω –º—ç–¥—ç—Ö“Ø–π</a></li><li><a href="#">–®–∏–Ω–∂–ª—ç—Ö —É—Ö–∞–∞–Ω</a></li></ul>
            </li>
            <li><a href="#">–Ø—Ä–∏–ª—Ü–ª–∞–≥–∞</a>
                <ul><li><a href="#">–•”©—Ä”©–≥ —è—Ä–∏–ª—Ü–ª–∞–≥–∞</a></li><li><a href="#">–£–ª—Å —Ç”©—Ä–∏–π–Ω —è—Ä–∏–ª—Ü–ª–∞–≥–∞</a></li></ul>
            </li>
        </ul>
    </nav>
</header>

<div id="header-widgets">
    <div id="weatherContainer">
        <p id="weatherText">–¶–∞–≥ –∞–≥–∞–∞—Ä—ã–Ω –º—ç–¥—ç—ç —Ç–∞—Ç–∞–∂ –±–∞–π–Ω–∞...</p>
    </div>
    
    <div id="timeContainer">
        <span id="dateTimeText">–û–≥–Ω–æ–æ/–¶–∞–≥ —Ç–∞—Ç–∞–∂ –±–∞–π–Ω–∞...</span>
    </div>
    
    <div id="tickerContainer">
        <strong>‚ú® –£–†–ò–ê–õ–ì–ê</strong>
        <div id="tickerContent">
            –£—Ä–∏–∞–ª–≥–∞ –≥“Ø–π–ª–≥—ç–∂ –±–∞–π–Ω–∞...
        </div>
    </div>
</div>


<div class="category-tabs" id="categoryTabs" style="padding: 10px 15px; margin: 15px; background: #fff; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.05);">
    <button class="tab-button active" onclick="showCategory('all')">“Æ–Ω–¥—Å—ç–Ω (–ë“Ø—Ö –º—ç–¥—ç—ç)</button> 
    </div>

<div class="category-content-wrapper" id="categoryContentWrapper">
    <div class="category-section active" id="allNewsSection" data-category="all">
        
        <div class="main-content-area">
            </div>

        <div class="sidebar-container" id="sidebarContainer">
            </div>
    </div>
    
    </div>


<div class="authors-container" id="authorsContainer"></div>

<div class="pagination" id="pagination" style="display: flex;"></div> 

<div class="video-card-bottom" id="videoContainer" style="display: none;"> 
    <h3 id="videoTitle">–û–Ω—Ü–ª–æ—Ö –í–∏–¥–µ–æ</h3>
    <iframe 
        src="" 
        allowfullscreen
    ></iframe>
</div>

<div class="contact">
    <h3>–•–æ–ª–±–æ–æ –±–∞—Ä–∏—Ö</h3>
    <p>–£—Ç–∞—Å: 94344777</p>
    <p>Face: urtuuch.mn</p>
    <p>–•–∞—è–≥: –ê—Ä–≤–∞–π—Ö—ç—ç—Ä —Ö–æ—Ç</p>
</div>

<div id="newsModal">
    <div id="newsModalContent">
        <span id="newsModalClose">&times;</span>
        <h2 id="modalTitle"></h2>
        <div id="modalMeta" style="color:#666; font-size:12px; margin-bottom:10px;"></div>
        
        <div id="modalShare" style="margin-bottom: 15px; display: flex; gap: 10px; align-items: center;">
            <span style="font-weight: bold; font-size: 14px; color: #555;">–•—É–≤–∞–∞–ª—Ü–∞—Ö:</span>
        </div>
        
        <img id="modalImage" src="">
        <div id="modalContent" style="line-height: 1.6;"></div> 
    </div>
</div>

<script type="module">
// Supabase-–∏–π–Ω JS –∏–º–ø–æ—Ä—Ç
import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2.42.0/+esm';

const SUPABASE_URL = "https://wpotnvekaoosdkvmhqgo.supabase.co";
const SUPABASE_ANON_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indwb3RudmVrYW9vc2Rrdm1ocWdvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUwMTU3NjQsImV4cCI6MjA4MDU5MTc2NH0.YIpy_IA9nNseYUJB3Y-adxgv9btgAt5IKP5FJpafNC0";

const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

let authorsData = [];
let newsData = [];
let currentPage = 1;
const NEWS_PER_PAGE = 12; 
const TOTAL_NEWS_LIMIT = 29; 

// ===================================================================================
// üí° API –¢“Æ–õ–•“Æ“Æ–†“Æ“Æ–î
// ===================================================================================
const OPENWEATHER_API_KEY = "b73211d51342848ae190f73b7ad3b667"; 
const defaultCity = "Ulaanbaatar"; 


// ===================================================================================
// YouTube ID-–≥ URL-–∞–∞—Å —Å–∞–ª–≥–∞–∂, embed HTML “Ø“Ø—Å–≥—ç—Ö —Ç—É—Å–ª–∞—Ö —Ñ—É–Ω–∫—Ü (–ú–æ–¥–∞–ª—å–¥ –∑–æ—Ä–∏—É–ª—Å–∞–Ω)
// ===================================================================================
function getYouTubeEmbedHtml(videoUrl) {
    if (!videoUrl) return '';

    try {
        let videoId = null;
        const url = new URL(videoUrl);
        
        if (url.hostname.includes('youtube.com')) {
            videoId = url.searchParams.get('v');
        } else if (url.hostname === 'youtu.be') {
            videoId = url.pathname.substring(1);
        }

        if (!videoId) return '';

        const embedUrl = `https://www.youtube.com/embed/${videoId}?autoplay=0&controls=1&rel=0`;

        // –ú–æ–¥–∞–ª—å –¥–æ—Ç–æ—Ä—Ö –≤–∏–¥–µ–æ–Ω—ã HTML
        return `
            <div class="modal-video-container">
                <iframe 
                    style="width: 100%; height: 320px; border: none; border-radius: 8px;" 
                    src="${embedUrl}" 
                    frameborder="0" 
                    allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
                    allowfullscreen>
                </iframe>
            </div>`;
        
    } catch (e) {
        return '';
    }
}
// ===================================================================================

async function fetchAuthors() {
    const { data, error } = await supabase.from('authors').select('*').order('id');
    if(error) console.error("Authors fetch error:", error); 
    else authorsData = data;
}

async function fetchNews() {
    const { data, error } = await supabase.from('news')
        .select('*, card_type, video_link') 
        .eq('active', true) 
        .order('created_at',{ascending:false})
        .limit(TOTAL_NEWS_LIMIT); 
        
    if(error) console.error("News fetch error:", error); 
    else newsData = data;
}

function displayAuthors() {
    const container = document.getElementById('authorsContainer');
    if (!authorsData || authorsData.length === 0) return; 

    container.innerHTML = authorsData.map(a=>`
        <div class="author-card">
            <img src="${a.image || 'https://i.imgur.com/KqJv6N6.png'}" alt="${a.name}">
            <div class="author-name">${a.name}</div>
            <div class="author-title">${a.title}</div>
        </div>
    `).join('');
}

/**
 * News Card “Ø“Ø—Å–≥—ç—Ö —Ç—É—Å–ª–∞—Ö —Ñ—É–Ω–∫—Ü (onclick-—ç—ç—Ä –º–æ–¥–∞–ª—å –Ω—ç—ç–Ω—ç)
 */
function createNewsCard(n, cardType) {
    // –ó—É—Ä–∞–≥ –¥—ç—ç—Ä –¥–∞–≤—Ö–∞—Ä–ª–∞–∂ –±–∞–π–≥–∞–∞ –∑–∞–≥–≤–∞—Ä—Ç –∑–æ—Ö–∏–æ–≥—á–∏–π–≥ –Ω—É—É—Å–∞–Ω —Ç—É–ª —ç–Ω—ç —Ö—ç—Å—ç–≥ —à–∞–∞—Ä–¥–ª–∞–≥–∞–≥“Ø–π
    // const author = authorsData.find(a=>a.id===n.author_id) || {name:"–¢–æ–¥–æ—Ä—Ö–æ–π–≥“Ø–π",image:"https://i.imgur.com/KqJv6N6.png"};
    
    const div = document.createElement('div'); 
    div.className = "card";
    // Ticker-–∏–π–Ω –º—ç–¥—ç—ç–≥ –¥–∞—Ä—Å–∞–Ω “Ø–µ–¥ ID-–≥–∞–∞—Ä —Ö–∞–π—Ö—ã–Ω —Ç—É–ª–¥ ID-–≥ –¥–∞–º–∂—É—É–ª–Ω–∞
    div.onclick = () => openNewsModal(n.id); 

    const isFeatured = n.featured && cardType !== 'featured_sidebar_small'; 

    const categoryText = (isFeatured ? '–û–ù–¶–õ–û–• | ' : '') + n.category;
    const categoryStyle = (isFeatured || cardType === 'featured_main') ? 'background: #e74c3c;' : ''; 

    const contentHtml = `
        <div class="card-content">
            <h3 class="card-title">${n.title}</h3>
            <div class="card-meta">
                <span class="category" style="${categoryStyle}">${categoryText}</span>
                <span>${new Date(n.created_at).toLocaleDateString('mn-MN')}</span>
            </div>
            ${cardType === 'featured_main' ? `<p style="color:#eee; margin-top:10px; font-size:14px;">${n.description ? n.description.replace(/<[^>]*>?/gm, '').substring(0, 150) + '...' : ''}</p>` : ''} 
        </div>
    `;
    
    div.innerHTML = `${n.image?`<img src="${n.image}" alt="${n.title}">`:''}${contentHtml}`;
    
    return div;
}

// ===================================================================================
// üí° –®–ò–ù–≠–ß–õ–≠–õ–¢: –ê–Ω–≥–∏–ª–ª—ã–Ω —Ç–∞–± –±–æ–ª–æ–Ω –∫–æ–Ω—Ç–µ–Ω—Ç—ã–≥ “Ø“Ø—Å–≥—ç—Ö
// ===================================================================================

function generateCategoryTabs() {
    const tabsContainer = document.getElementById('categoryTabs');
    const contentWrapper = document.getElementById('categoryContentWrapper');
    
    // –ú—ç–¥—ç—ç–Ω–∏–π –¥–∞—Ç–∞–≥–∞–∞—Å –¥–∞–≤—Ö–∞—Ä–¥–∞—Ö–≥“Ø–π –∞–Ω–≥–∏–ª–ª—É—É–¥—ã–≥ —Ü—É–≥–ª—É—É–ª–∞—Ö
    const categories = [...new Set(newsData.map(n => n.category).filter(c => c && c.trim() !== ''))];
    
    // –ê–Ω–≥–∏–ª–ª—É—É–¥—ã–≥ –Ω—ç–º—ç—Ö
    categories.forEach(cat => {
        // HTML ID-–¥ —Ç–æ—Ö–∏—Ä–æ—Ö –Ω—ç—Ä “Ø“Ø—Å–≥—ç—Ö
        const cleanCatName = cat.replace(/[^a-zA-Z0-9]/g, '');
        
        // –¢–∞–± —Ç–æ–≤—á–ª—É—É—Ä
        const button = document.createElement('button');
        button.className = 'tab-button';
        button.innerText = cat;
        // –§—É–Ω–∫—Ü –¥—É—É–¥–∞—Ö–¥–∞–∞ —Ç–∞—Å–ª–∞–ª–≥“Ø–π–≥—ç—ç—Ä cat –Ω—ç—Ä–∏–π–≥ –¥–∞–º–∂—É—É–ª–Ω–∞
        button.setAttribute('onclick', `showCategory('${cat.replace(/'/g, "\\'")}')`);
        tabsContainer.appendChild(button);
        
        // –¢—É—Ö–∞–π–Ω –∞–Ω–≥–∏–ª–ª—ã–Ω –º—ç–¥—ç—ç–≥ —Ö–∞—Ä—É—É–ª–∞—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
        const section = document.createElement('div');
        // –ê–Ω–≥–∏–ª–ª—ã–Ω —Ö—É—É–¥—Å—É—É–¥ grid –∫–ª–∞—Å—Å—ã–≥ –∞—à–∏–≥–ª–∞–Ω–∞
        section.className = 'grid category-section'; 
        section.id = `${cleanCatName}Section`; 
        section.setAttribute('data-category', cat);
        contentWrapper.appendChild(section);
    });
}

/**
 * –ê–Ω–≥–∏–ª–ª—ã–Ω —Ç–æ–≤—á–ª—É—É—Ä –¥–∞—Ä–∞—Ö–∞–¥ –∞–∂–∏–ª–ª–∞—Ö —Ñ—É–Ω–∫—Ü
 */
window.showCategory = function(categoryName) {
    // –ë“Ø—Ö —Ç–∞–± —Ç–æ–≤—á–ª—É—É—Ä/–∞–∞—Å 'active' –∫–ª–∞—Å—Å—ã–≥ —Ö–∞—Å–∞—Ö
    document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
    
    // –ë“Ø—Ö –∞–Ω–≥–∏–ª–ª—ã–Ω —Ö—ç—Å–≥“Ø“Ø–¥—ç—ç—Å 'active' –∫–ª–∞—Å—Å—ã–≥ —Ö–∞—Å–∞—Ö (–Ω—É—É—Ö)
    document.querySelectorAll('.category-section').forEach(section => section.classList.remove('active'));
    
    document.getElementById('videoContainer').style.display = 'none'; // –≠—Ö–ª—ç—Ö–¥—ç—ç –≤–∏–¥–µ–æ–≥ –Ω—É—É–Ω–∞

    // –ò–¥—ç–≤—Ö—Ç—ç–π —Ç–∞–± —Ç–æ–≤—á–ª—É—É—Ä—ã–≥ –æ–ª–æ—Ö
    let activeTabButton = null;
    document.querySelectorAll('.tab-button').forEach(btn => {
        // –¢–æ–≤—á–ª—É—É—Ä—ã–Ω —Ç–µ–∫—Å—Ç —ç—Å–≤—ç–ª onclick-–∏–π–Ω —É—Ç–≥–∞–∞—Ä —Ö–∞–π–Ω–∞
        if (btn.innerText.includes(categoryName) || btn.getAttribute('onclick').includes(`'${categoryName.replace(/'/g, "\\'")}'`)) {
            activeTabButton = btn;
        }
    });

    // –ò–¥—ç–≤—Ö—Ç—ç–π —Ç–∞–± —Ç–æ–≤—á–ª—É—É—Ä/—Ç 'active' –∫–ª–∞—Å—Å—ã–≥ –Ω—ç–º—ç—Ö
    if (activeTabButton) {
        activeTabButton.classList.add('active');
    }

    // 1. “Æ–Ω–¥—Å—ç–Ω (–ë“Ø—Ö –º—ç–¥—ç—ç) —Ö—ç—Å—ç–≥ (Sidebar-—Ç–∞–π)
    if (categoryName === 'all') {
        const allSection = document.getElementById('allNewsSection');
        allSection.classList.add('active');
        displayMainPage(); 
        document.getElementById('pagination').style.display = 'flex'; // Pagination-–∏–π–≥ —Ö–∞—Ä—É—É–ª–Ω–∞
        displayVideoCard(); // –í–∏–¥–µ–æ–≥ —Ö–∞—Ä—É—É–ª–Ω–∞
    } else {
        // 2. –ê–Ω–≥–∏–ª–∞–ª —Ç—É—Å –±“Ø—Ä–∏–π–Ω —Ö—ç—Å—ç–≥ (Sidebar–≥“Ø–π, –±“Ø—Ç—ç–Ω ”©—Ä–≥”©–Ω—Ç—ç–π)
        const cleanCatName = categoryName.replace(/[^a-zA-Z0-9]/g, '');
        const categorySection = document.getElementById(`${cleanCatName}Section`);
        
        if (categorySection) {
            categorySection.classList.add('active');
            displayCategoryNews(categoryName, categorySection);
        }
        document.getElementById('pagination').style.display = 'none'; // Pagination —Ö—ç—Ä—ç–≥–≥“Ø–π
    }
}

// ===================================================================================
// SIDEBAR: –°“Ø“Ø–ª–∏–π–Ω 10 –º—ç–¥—ç—ç–≥ –ó—É—Ä–∞–≥—Ç–∞–π–≥–∞–∞—Ä —Ö–∞—Ä—É—É–ª–∞—Ö
// ===================================================================================
function displaySidebarNews() {
    const container = document.getElementById('sidebarContainer');
    if (!container) return;
    
    // –°“Ø“Ø–ª–∏–π–Ω 10 –º—ç–¥—ç—ç–≥ —Å–æ–Ω–≥–æ—Ö
    const latestNews = newsData.slice(0, 5); 
    
    if (latestNews.length === 0) {
        container.innerHTML = '<h3>–®–ò–ù–≠ –ú–≠–î–≠–≠</h3><p style="font-size: 12px; color: #777;">–û–¥–æ–æ–≥–æ–æ—Ä —à–∏–Ω—ç –º—ç–¥—ç—ç –∞–ª–≥–∞ –±–∞–π–Ω–∞.</p>';
        return;
    }

    let sidebarHtml = '<h3>–®–ò–ù–≠ –ú–≠–î–≠–≠</h3>';
    
    latestNews.forEach(n => {
        const date = new Date(n.created_at).toLocaleDateString('mn-MN');
        // –ó—É—Ä–∞–≥ –±–∞–π—Ö–≥“Ø–π –±–æ–ª default –∑—É—Ä–∞–≥ –∞—à–∏–≥–ª–∞–Ω–∞
        const imageUrl = n.image || 'https://i.imgur.com/vH1Nq0n.png'; 
        
        sidebarHtml += `
            <div class="latest-news-item" onclick="openNewsModal(${n.id})">
                <div class="sidebar-img-wrapper">
                    <img src="${imageUrl}" alt="${n.title}">
                </div>
                <div class="sidebar-content-wrapper">
                    <a href="javascript:void(0)">
                        ${n.title}
                    </a>
                    <span>üóìÔ∏è ${date}</span>
                </div>
            </div>
        `;
    });
    
    container.innerHTML = sidebarHtml;
}

// ===================================================================================
// “Æ–Ω–¥—Å—ç–Ω —Ö—É—É–¥—Å—ã–≥ —Ö–∞—Ä—É—É–ª–∞—Ö (Featured, Sidebar, Pagination-—Ç–∞–π)
// ===================================================================================
function displayMainPage() {
    const allSection = document.getElementById('allNewsSection');
    const mainContentArea = allSection.querySelector('.main-content-area');
    
    if (!mainContentArea) return; 
    mainContentArea.innerHTML = ''; // –ó”©–≤—Ö”©–Ω –≥–æ–ª —Ö—ç—Å–≥–∏–π–≥ —Ü—ç–≤—ç—Ä–ª—ç–Ω—ç
    
    if (!newsData || newsData.length === 0) {
        mainContentArea.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; margin-top: 50px;">–û–¥–æ–æ–≥–æ–æ—Ä –Ω–∏–π—Ç–ª—ç–≥–¥—Å—ç–Ω –º—ç–¥—ç—ç –∞–ª–≥–∞ –±–∞–π–Ω–∞.</p>';
        renderPagination(0);
        document.getElementById('videoContainer').style.display = 'none'; 
        document.getElementById('sidebarContainer').innerHTML = ''; // Sidebar-—ã–≥ —Ö–æ–æ—Å–æ–Ω –±–æ–ª–≥–æ–Ω–æ
        return;
    }

    const start = (currentPage-1)*NEWS_PER_PAGE;
    const end = start + NEWS_PER_PAGE;
    const pageNews = newsData.slice(start,end);

    let mainFeatured = null; 
    let sidebarFeatured = []; 
    const normal = []; 
    
    // –ú—ç–¥—ç—ç–≥ –±“Ø–ª—ç–≥–ª—ç—Ö
    for (const n of pageNews) {
        if (n.card_type === 'featured_large' && !mainFeatured) {
            mainFeatured = n; 
        } else if (sidebarFeatured.length < 4 && (n.card_type === 'featured_large' || n.card_type === 'sub_featured')) {
            sidebarFeatured.push(n); 
        } else {
            normal.push(n); 
        }
    }
    
    // 1. Featured Block-–∏–π–≥ “Æ“Ø—Å–≥—ç—Ö
    if (mainFeatured) {
        const featuredBlock = document.createElement('div');
        featuredBlock.className = 'featured-block-container';

        const mainCard = createNewsCard(mainFeatured, 'featured_main'); 
        mainCard.classList.add('featured-main-card');

        const sidebar = document.createElement('div');
        sidebar.className = 'featured-sidebar';
        
        // Featured sidebar-—Ç –Ω–∏–π—Ü—ç—Ö –º—ç–¥—ç—ç–≥ —Ö–∞—Ä—É—É–ª–∞—Ö
        sidebarFeatured = sidebarFeatured.filter(n => n.id !== mainFeatured.id).slice(0, 4); 
        
        sidebarFeatured.forEach(n => {
             const div = createNewsCard(n, 'featured_sidebar_small'); 
             sidebar.appendChild(div);
        });

        featuredBlock.appendChild(mainCard);
        // –ó”©–≤—Ö”©–Ω –º—ç–¥—ç—ç –±–∞–π–≥–∞–∞ “Ø–µ–¥ sidebar-—ã–≥ –Ω—ç–º–Ω—ç
        if (sidebarFeatured.length > 0) {
            featuredBlock.appendChild(sidebar);
        } else {
             mainCard.style.gridColumn = '1 / -1'; // –•—ç—Ä—ç–≤ sidebar –±–∞–π—Ö–≥“Ø–π –±–æ–ª featured-–∏–π–≥ –±“Ø—Ç—ç–Ω –±–æ–ª–≥–æ–Ω–æ
        }
        
        mainContentArea.appendChild(featuredBlock); 
    }

    // 2. –≠–Ω–≥–∏–π–Ω –ö–∞—Ä—Ç—É—É–¥ (Normal)
    normal.forEach(n=>{
        const div = createNewsCard(n, 'normal');
        
        if (n.card_type === 'sub_featured') {
            div.classList.add('sub-featured-card');
        }
        mainContentArea.appendChild(div);
    });
    
    // 3. Sidebar-—ã–≥ –¥—É—É–¥–∞—Ö
    displaySidebarNews(); 
    
    displayVideoCard();
    renderPagination();
    displayAuthors();
}

/**
 * –ê–Ω–≥–∏–ª–ª—ã–Ω –º—ç–¥—ç—ç–≥ —Ö–∞—Ä—É—É–ª–∞—Ö —Ñ—É–Ω–∫—Ü (Sidebar –±–æ–ª–æ–Ω Featured block-–≥“Ø–π)
 */
function displayCategoryNews(categoryName, container) {
    container.innerHTML = ''; // –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã–≥ —Ü—ç–≤—ç—Ä–ª—ç—Ö

    const filteredNews = newsData.filter(n => n.category === categoryName);
    
    if (filteredNews.length === 0) {
        container.innerHTML = `<p style="grid-column: 1 / -1; text-align: center; margin-top: 50px;">"${categoryName}" –∞–Ω–≥–∏–ª–∞–ª–¥ –º—ç–¥—ç—ç –æ–¥–æ–æ–≥–æ–æ—Ä –∞–ª–≥–∞ –±–∞–π–Ω–∞.</p>`;
        return;
    }

    // –ê–Ω–≥–∏–ª–ª—ã–Ω –º—ç–¥—ç—ç–≥ —ç–Ω–≥–∏–π–Ω –∫–∞—Ä—Ç–∞–∞—Ä —Ö–∞—Ä—É—É–ª–∞—Ö
    filteredNews.forEach(n => {
        const div = createNewsCard(n, 'normal');
        if (n.card_type === 'sub_featured') {
            div.classList.add('sub-featured-card');
        }
        container.appendChild(div);
    });
}


function renderPagination() {
    const container = document.getElementById('pagination');
    const totalPages = Math.ceil(newsData.length/NEWS_PER_PAGE); 
    container.innerHTML='';
    if(totalPages<=1) return;

    if(currentPage>1){
        const prev=document.createElement('button');
        prev.innerText="”®–º–Ω”©—Ö";
        prev.onclick=()=>{currentPage--; showCategory('all'); window.scrollTo({top: 0, behavior: 'smooth'});};
        container.appendChild(prev);
    }

    for(let i=1;i<=totalPages;i++){
        const btn=document.createElement('button');
        btn.innerText=i;
        if(i===currentPage) btn.style.background="#3d85c6";
        btn.onclick=()=>{currentPage=i; showCategory('all'); window.scrollTo({top: 0, behavior: 'smooth'});};
        container.appendChild(btn);
    }

    if(currentPage<totalPages){
        const next=document.createElement('button');
        next.innerText="–î–∞—Ä–∞–∞—Ö";
        next.onclick=()=>{currentPage++; showCategory('all'); window.scrollTo({top: 0, behavior: 'smooth'});};
        container.appendChild(next);
    }
}


// –•–∞–º–≥–∏–π–Ω –¥–æ–æ—Ä—Ö —Ç–æ–º –≤–∏–¥–µ–æ–≥ —Ö–∞—Ä—É—É–ª–∞—Ö
function displayVideoCard() {
    const videoContainer = document.getElementById('videoContainer');
    const iframeElement = videoContainer.querySelector('iframe');
    const titleElement = document.getElementById('videoTitle');
    
    // video_link —Ç–∞–ª–±–∞—Ä –±”©–≥–ª”©–≥–¥—Å”©–Ω, —Ö–∞–º–≥–∏–π–Ω —Å“Ø“Ø–ª–∏–π–Ω —ç—Ö–Ω–∏–π –º—ç–¥—ç—ç–≥ —Ö–∞–π–∂ –æ–ª–Ω–æ.
    const videoNews = newsData.find(n => n.video_link);
    
    if (videoNews && videoNews.video_link) {
        let videoId = null;
        
        try {
            const url = new URL(videoNews.video_link);
            if (url.hostname.includes('youtube.com')) {
                videoId = url.searchParams.get('v');
            } else if (url.hostname === 'youtu.be') {
                videoId = url.pathname.substring(1);
            }
        } catch (e) {
            console.error("–í–∏–¥–µ–æ –ª–∏–Ω–∫–∏–π–≥ —É–Ω—à–∏—Ö–∞–¥ –∞–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞:", e);
        }
        
        if (!videoId) {
            videoContainer.style.display = 'none';
            return;
        }

        const embedLink = `https://www.youtube.com/embed/${videoId}?autoplay=0&controls=1&rel=0`;

        titleElement.innerText = videoNews.title || "–û–Ω—Ü–ª–æ—Ö –í–∏–¥–µ–æ";
        iframeElement.src = embedLink;
        
        videoContainer.style.display = 'block';
        
    } else {
        videoContainer.style.display = 'none';
    }
}


// ===================================================================================
// –ú—ç–¥—ç—ç–≥ –ú–æ–¥–∞–ª—å–¥ –Ω—ç—ç—Ö –±–∞ URL-–∏–π–≥ —à–∏–Ω—ç—á–ª—ç—Ö
// ===================================================================================
function openNewsModal(newsItemOrId, pushHistory = true) {
    let newsItem;
    // newsItem –Ω—å –∑”©–≤—Ö”©–Ω ID –±–∞–π–≤–∞–ª, –¥–∞—Ç–∞–≥–∞–∞—Å —Ö–∞–π–∂ –æ–ª–Ω–æ
    if (typeof newsItemOrId === 'number') {
        const foundItem = newsData.find(n => n.id === newsItemOrId);
        if (foundItem) {
            newsItem = foundItem;
        } else {
            console.error("News item not found for ID:", newsItemOrId);
            return;
        }
    } else {
        newsItem = newsItemOrId;
    }

    const videoHtml = getYouTubeEmbedHtml(newsItem.video_link);

    const modal = document.getElementById('newsModal');
    const modalContentDiv = document.getElementById('modalContent');
    const author = authorsData.find(a=>a.id===newsItem.author_id) || {name:"–¢–æ–¥–æ—Ä—Ö–æ–π–≥“Ø–π"};
    
    // 1. URL-–∏–π–≥ —à–∏–Ω—ç—á–ª—ç—Ö
    if (pushHistory) {
        const newUrl = `${window.location.pathname}?id=${newsItem.id}`;
        history.pushState({ newsId: newsItem.id }, newsItem.title, newUrl);
    }

    // –ú–æ–¥–∞–ª—å –¥–∞—Ö—å –º—ç–¥—ç—ç–ª–ª–∏–π–≥ —à–∏–Ω—ç—á–ª—ç—Ö
    document.getElementById('modalTitle').innerText = newsItem.title;
    document.getElementById('modalImage').src = newsItem.image || ''; 
    document.getElementById('modalMeta').innerHTML = `
        –ê–Ω–≥–∏–ª–∞–ª: ${newsItem.category} | 
        –ù–∏–π—Ç–ª—ç–≥–¥—Å—ç–Ω: ${new Date(newsItem.created_at).toLocaleDateString('mn-MN')} | 
        –ù–∏–π—Ç–ª—ç–ª—á: ${author.name}
    `;
    
    // –í–∏–¥–µ–æ–≥ (—Ö—ç—Ä—ç–≤ –±–∞–π–≥–∞–∞ –±–æ–ª) —Ç–µ–∫—Å—Ç–∏–π–Ω ”©–º–Ω”© –Ω—ç–º—ç—Ö
    modalContentDiv.innerHTML = videoHtml + (newsItem.description || "");

    // 2. Share —Ç–æ–≤—á–ª—É—É—Ä—É—É–¥—ã–≥ “Ø“Ø—Å–≥—ç—Ö
    const shareContainer = document.getElementById('modalShare');
    const newsUrl = window.location.href; 
    const newsTitle = encodeURIComponent(newsItem.title);
    
    // Share —Ç–æ–≤—á–ª—É—É—Ä—ã–Ω HTML-–∏–π–≥ “Ø“Ø—Å–≥—ç—Ö
    shareContainer.innerHTML = `
        <span style="font-weight: bold; font-size: 14px; color: #555;">–•—É–≤–∞–∞–ª—Ü–∞—Ö:</span>
        
        <a href="https://www.facebook.com/sharer/sharer.php?u=${newsUrl}" target="_blank" style="text-decoration: none;">
            <img src="https://upload.wikimedia.org/wikipedia/commons/0/05/Facebook_Logo_%282019%29.png" alt="Facebook Share" style="width: 24px; height: 24px;">
        </a>
        
        <a href="https://twitter.com/intent/tweet?url=${newsUrl}&text=${newsTitle}" target="_blank" style="text-decoration: none;">
            <img src="https://upload.wikimedia.org/wikipedia/commons/6/6f/Logo_of_Twitter.svg" alt="Twitter Share" style="width: 24px; height: 24px;">
        </a>
        
        <a href="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" target="_blank" style="text-decoration: none;">
             <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram Share" style="width: 24px; height: 24px;">
        </a>
    `;
    
    shareContainer.style.display = 'flex'; // Share —Ö—ç—Å–≥–∏–π–≥ —Ö–∞—Ä—É—É–ª–Ω–∞

    modal.style.display = 'flex';
}

// Global scope-–¥ –≥–∞—Ä–≥–∞—Ö 
window.openNewsModal = openNewsModal; 
// ===================================================================================


function displayFilteredNews(filteredData) {
    const container = document.getElementById('allNewsSection'); 
    const mainContentArea = container.querySelector('.main-content-area');
    
    container.classList.add('active'); // –•–∞–π–ª—Ç—ã–Ω “Ø—Ä –¥“Ø–Ω–≥ 'all' —Ö—ç—Å—ç–≥—Ç —Ö–∞—Ä—É—É–ª–Ω–∞
    document.getElementById('pagination').style.display = 'none';
    document.getElementById('videoContainer').style.display = 'none';

    // –•–∞–π–ª—Ç —Ö–∏–π—Ö “Ø–µ–¥ Sidebar-—ã–≥ —Ö–∞—Ä—É—É–ª–∞—Ö–≥“Ø–π —Ç—É–ª —ç–Ω—ç —Ö—ç—Å–≥–∏–π–≥ –Ω—É—É—Ö —ç—Å–≤—ç–ª —Ö–æ–æ—Å–æ–Ω –±–æ–ª–≥–æ–Ω–æ.
    document.getElementById('sidebarContainer').innerHTML = ''; 

    if (!mainContentArea) return;
    mainContentArea.innerHTML = ''; // –ì–æ–ª —Ö—ç—Å–≥–∏–π–≥ —Ü—ç–≤—ç—Ä–ª—ç–Ω—ç

    if (!filteredData || filteredData.length === 0) {
        mainContentArea.innerHTML = '<p style="grid-column: 1 / -1; text-align: center; margin-top: 50px;">–•–∞–π–ª—Ç–∞–∞—Ä –º—ç–¥—ç—ç –æ–ª–¥—Å–æ–Ω–≥“Ø–π.</p>';
        return;
    }

    // –•–∞–π–ª—Ç—ã–Ω “Ø—Ä –¥“Ø–Ω–≥–∏–π–Ω –∫–∞—Ä—Ç—É—É–¥ –±“Ø—Ç—ç–Ω ”©—Ä–≥”©–Ω—Ç—ç–π –≥–∞—Ä—á –∏—Ä—ç—Ö–∏–π–Ω —Ç—É–ª–¥ grid-–∏–π–≥ 4 –±–∞–≥–∞–Ω–∞—Ç–∞–π —Ö—ç–≤—ç—ç—Ä “Ø–ª–¥—ç—ç–Ω—ç
    filteredData.forEach(n => {
        const div = createNewsCard(n, 'normal'); 
        mainContentArea.appendChild(div);
    });
}

document.getElementById('searchInput').addEventListener('input', ()=>{
    const keyword = document.getElementById('searchInput').value.toLowerCase();
    
    // –•–∞–π–ª—Ç —Ö–∏–π—Ö “Ø–µ–¥ sidebar-–≥“Ø–π –∑–∞–≥–≤–∞—Ä—Ç —à–∏–ª–∂–∏—Ö
    const allSection = document.getElementById('allNewsSection');
    allSection.style.gridTemplateColumns = '1fr'; // Sidebar-–≥“Ø–π, –±“Ø—Ç—ç–Ω ”©—Ä–≥”©–Ω
    allSection.querySelector('.main-content-area').style.gridTemplateColumns = 'repeat(4, 1fr)'; // –ö–∞—Ä—Ç 4 –±–∞–≥–∞–Ω–∞—Ç–∞–π —Ö—ç–≤—ç—ç—Ä

    // –ë“Ø—Ö —Ç–∞–±—ã–≥ –∏–¥—ç–≤—Ö–≥“Ø–π –±–æ–ª–≥–æ–Ω–æ
    document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
    document.querySelectorAll('.category-section').forEach(section => section.classList.remove('active'));


    if (keyword === '') {
        currentPage = 1;
        // –•–∞–π–ª—Ç–≥“Ø–π –±–æ–ª “Ø–Ω–¥—Å—ç–Ω —Ö—É—É–¥—Å–∞–∞ —Ö–∞—Ä—É—É–ª–Ω–∞ (Sidebar-—Ç–∞–π –∑–∞–≥–≤–∞—Ä)
        allSection.style.gridTemplateColumns = '3fr 1fr'; 
        // '“Æ–Ω–¥—Å—ç–Ω (–ë“Ø—Ö –º—ç–¥—ç—ç)' —Ç–∞–±–∏–π–≥ –∏–¥—ç–≤—Ö—Ç—ç–π –±–æ–ª–≥–æ–Ω–æ
        document.querySelector('.tab-button').classList.add('active'); 
        showCategory('all'); 
    } else {
        const filtered = newsData.filter(n=>n.title.toLowerCase().includes(keyword));
        displayFilteredNews(filtered);
    }
});


// Modal close update (URL-–∏–π–≥ “Ø–Ω–¥—Å—ç–Ω —Ö—É—É–¥–∞—Å —Ä—É—É –±—É—Ü–∞–∞–Ω–∞)
document.getElementById('newsModalClose').onclick = ()=>{ 
    document.getElementById('newsModal').style.display='none'; 
    // URL-–∏–π–≥ –±—É—Ü–∞–∞–Ω–∞
    history.pushState({}, document.title, window.location.pathname); 
};
document.getElementById('newsModal').onclick = e=>{ 
    if(e.target.id==='newsModal') {
        document.getElementById('newsModal').style.display='none'; 
        // URL-–∏–π–≥ –±—É—Ü–∞–∞–Ω–∞
        history.pushState({}, document.title, window.location.pathname); 
    }
};


// URL-–∞–∞—Å –º—ç–¥—ç—ç–Ω–∏–π ID-–≥ —à–∞–ª–≥–∞–∂ –º–æ–¥–∞–ª–∏–π–≥ –Ω—ç—ç—Ö —Ñ—É–Ω–∫—Ü
function checkUrlForNewsId() {
    const urlParams = new URLSearchParams(window.location.search);
    const newsId = urlParams.get('id');
    
    if (newsId && newsData.length > 0) {
        // ID-–≥ string-—ç—ç—Å number —Ä“Ø“Ø —Ö”©—Ä–≤“Ø“Ø–ª–∂ —Ö–∞–π–Ω–∞
        const item = newsData.find(n => n.id === parseInt(newsId));
        if (item) {
            // pushHistory=false: URL-–¥ ID –±–∞–π–≥–∞–∞ —Ç—É–ª –¥–∞—Ö–∏–Ω —à–∏–Ω—ç—á–ª—ç—Ö–≥“Ø–π
            openNewsModal(item, false); 
        } else {
            // ID –æ–ª–æ—Ö–≥“Ø–π –±–æ–ª URL-–∏–π–≥ —Ü—ç–≤—ç—Ä–ª—ç–Ω—ç
            history.pushState({}, document.title, window.location.pathname);
        }
    }
}

// Browser-–∏–π–Ω back/forward —Ç–æ–≤—á–∏–π–≥ –¥—ç–º–∂–∏—Ö
window.addEventListener('popstate', (event) => {
    if (window.location.search.includes('id=')) {
        checkUrlForNewsId();
    } else {
        document.getElementById('newsModal').style.display = 'none'; 
        // –ê–Ω–≥–∏–ª–ª—ã–Ω —Ö—É—É–¥–∞—Å–Ω–∞–∞—Å –±—É—Ü–∞–∂ –±–∞–π–≤–∞–ª “Ø–Ω–¥—Å—ç–Ω —Ö—É—É–¥—Å—ã–≥ –¥–∞—Ö–∏–Ω –∞—á–∞–∞–ª–Ω–∞
        // Sidebar-—Ç–∞–π –∑–∞–≥–≤–∞—Ä—Ç –±—É—Ü–∞–∞–Ω–∞
        document.getElementById('allNewsSection').style.gridTemplateColumns = '3fr 1fr'; 
        showCategory('all');
    }
});

// ===================================================================================
// –¶–ê–ì –ê–ì–ê–ê–†–´–ù –§–£–ù–ö–¶
// ===================================================================================

function getCoordinates() {
    const weatherTextElement = document.getElementById('weatherText');
    
    if (!navigator.geolocation) {
        weatherTextElement.innerText = "–¶–∞–≥ –∞–≥–∞–∞—Ä: –ë–∞–π—Ä—à–ª—ã–Ω –º—ç–¥—ç—ç–ª—ç–ª –¥—ç–º–∂–∏—Ö–≥“Ø–π –±–∞–π–Ω–∞.";
        return;
    }

    navigator.geolocation.getCurrentPosition(
        (position) => {
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;
            fetchWeatherByLocation(lat, lon); 
        },
        (error) => {
            // –ë–∞–π—Ä—à–ª—ã–Ω –∑”©–≤—à”©”©—Ä”©–ª–≥“Ø–π –±–æ–ª default —Ö–æ—Ç—ã–Ω —Ü–∞–≥ –∞–≥–∞–∞—Ä—ã–≥ —Ö–∞—Ä—É—É–ª–Ω–∞
            fetchWeatherByCity(defaultCity); 
        }
    );
}

async function fetchWeatherByLocation(lat, lon) {
    const weatherTextElement = document.getElementById('weatherText');
    const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${OPENWEATHER_API_KEY}&units=metric&lang=mn`;
    await executeWeatherFetch(url, weatherTextElement);
}

async function fetchWeatherByCity(city) {
    const weatherTextElement = document.getElementById('weatherText');
    const url = `https://api.openweathermap.org/data/2.5/weather?q=${city}&appid=${OPENWEATHER_API_KEY}&units=metric&lang=mn`;
    await executeWeatherFetch(url, weatherTextElement);
}

async function executeWeatherFetch(url, element) {
    if (OPENWEATHER_API_KEY === "YOUR_API_KEY" || OPENWEATHER_API_KEY.length !== 32) {
        element.innerText = "–¶–∞–≥ –∞–≥–∞–∞—Ä: API —Ç“Ø–ª—Ö“Ø“Ø—Ä –±—É—Ä—É—É –±–∞–π–Ω–∞!";
        return;
    }
    
    try {
        const response = await fetch(url);
        if (!response.ok) {
             throw new Error('API-–∞–∞—Å –º—ç–¥—ç—ç–ª—ç–ª –∞–≤–∞—Ö–∞–¥ –∞–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞.');
        }
        
        const data = await response.json();
        const temp = Math.round(data.main.temp);
        const description = data.weather[0].description;
        const icon = data.weather[0].icon;
        
        const weatherHtml = `
            ${data.name}: ${temp}¬∞C, ${description} 
            <img src="https://openweathermap.org/img/w/${icon}.png" alt="${description}" style="width: 25px; height: 25px; vertical-align: middle; margin-left: 5px;">
        `;
        
        element.innerHTML = weatherHtml;

    } catch (error) {
        element.innerText = `–¶–∞–≥ –∞–≥–∞–∞—Ä —Ç–∞—Ç–∞—Ö–∞–¥ –∞–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞.`;
        console.error("–¶–∞–≥ –∞–≥–∞–∞—Ä —Ç–∞—Ç–∞—Ö–∞–¥ –∞–ª–¥–∞–∞ –≥–∞—Ä–ª–∞–∞:", error);
    }
}

// ===================================================================================
// üí° –®–ò–ù–≠ –§–£–ù–ö–¶: –û–†–û–ù –ù–£–¢–ì–ò–ô–ù –¶–ê–ì/–û–ì–ù–û–û (Local Time/Date)
// ===================================================================================

function updateDateTime() {
    const now = new Date();
    // –ú–æ–Ω–≥–æ–ª —Ö—ç–ª—ç—ç—Ä –æ–≥–Ω–æ–æ–≥ –≥–∞—Ä–≥–∞—Ö
    const dateOptions = { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' };
    const dateString = now.toLocaleDateString('mn-MN', dateOptions);
    // –¶–∞–≥–∏–π–≥ HH:MM:SS —Ñ–æ—Ä–º–∞—Ç–∞–∞—Ä –≥–∞—Ä–≥–∞—Ö
    const timeString = now.toLocaleTimeString('mn-MN', { hour: '2-digit', minute: '2-digit', second: '2-digit' });
    
    document.getElementById('dateTimeText').innerText = `${dateString} | ${timeString}`;
}


// ===================================================================================
// üí° –®–ò–ù–≠ –§–£–ù–ö–¶: –í—ç–±—Å–∞–π—Ç—ã–Ω –£–†–ò–ê–õ–ì–ê –ì“Æ–ô–õ–ì–≠–• –°–ê–ú–ë–ê–† (Slogan Ticker)
// ===================================================================================

function displayTicker() {
    const tickerContent = document.getElementById('tickerContent');
    
    // –ì“Ø–π–ª–≥—ç—Ö “Æ–Ω–¥—Å—ç–Ω –£—Ä–∏–∞–ª–≥–∞
    const slogan = "”®–†–¢”®”®–ß.–ú–ù –ú–≠–î–≠–≠–õ–õ–ò–ô–ù –°–ê–ô–¢ ‚ú® –°–ê–ô–ù –°–ê–ô–•–ê–ù –ò–†–≠–≠–î“Æ–ô–î –¢–ê–ù–´–ì ”®–†–¢”®”®–õ–ù”®. üöÄ";
    
    // Ticker-—Ç —Ö–∞—Ä—É—É–ª–∞—Ö HTML-–∏–π–≥ “Ø“Ø—Å–≥—ç—Ö
    let tickerHtml = `<span style="margin-right: 80px;">${slogan}</span>`;
    
    // Ticker-–∏–π–≥ –¥–∞–≤—Ö–∞—Ä–ª–∞–∂ –≥“Ø–π–ª–≥—ç—Ö–∏–π–Ω —Ç—É–ª–¥ 5 —É–¥–∞–∞ —Ö—É—É–ª–∂ –Ω—ç–º–Ω—ç. 
    tickerContent.innerHTML = tickerHtml + tickerHtml + tickerHtml + tickerHtml + tickerHtml; 
    
    // "‚ö° –®–£–£–†–•–ê–ô" –≥—ç—Å—ç–Ω —Ç–µ–∫—Å—Ç–∏–π–≥ "–£–†–ò–ê–õ–ì–ê" –±–æ–ª–≥–æ–∂ ”©”©—Ä—á–ª”©—Ö
    const tickerStrong = document.getElementById('tickerContainer').querySelector('strong');
    if (tickerStrong) {
        tickerStrong.innerText = '‚ú® –£–†–ò–ê–õ–ì–ê';
        tickerStrong.style.backgroundColor = '#3d85c6'; // –¶—ç–Ω—Ö—ç—Ä ”©–Ω–≥”©”©—Ä —Å–æ–ª–∏–Ω–æ
    }
    
    // Ticker-–∏–π–Ω –∞–Ω–∏–º–∞—Ü—ã–Ω —Ö—É—Ä–¥—ã–≥ —É—Ä—Ç ”©–≥“Ø“Ø–ª–±—ç—Ä—Ç —Ç–æ—Ö–∏—Ä—É—É–ª–∞–Ω —É–¥–∞–∞—à—Ä—É—É–ª–∞—Ö
    const tickerContentElement = document.getElementById('tickerContent');
    
    if (tickerContentElement) {
        // –£—Ä—Ç ”©–≥“Ø“Ø–ª–±—ç—Ä —É—á—Ä–∞–∞—Å –≥“Ø–π–ª–≥—ç—Ö —Ö—É–≥–∞—Ü–∞–∞–≥ –Ω—ç–º—ç–≥–¥“Ø“Ø–ª–Ω—ç
        tickerContentElement.style.animationDuration = '45s'; 
    }
}


// ===================================================================================

async function init(){
    // –¶–∞–≥ –∞–≥–∞–∞—Ä—ã–Ω –º—ç–¥—ç—ç–≥ —ç—Ö–ª“Ø“Ø–ª—ç—Ö (1 —Ü–∞–≥ —Ç—É—Ç–∞–º–¥)
    getCoordinates(); 
    setInterval(getCoordinates, 3600000); 
    
    // –û–≥–Ω–æ–æ/–¶–∞–≥–∏–π–≥ —ç—Ö–ª“Ø“Ø–ª—ç—Ö (1 —Å–µ–∫—É–Ω–¥ —Ç—É—Ç–∞–º–¥)
    updateDateTime();
    setInterval(updateDateTime, 1000); 

    // “Æ–Ω–¥—Å—ç–Ω –º—ç–¥—ç—ç–Ω–∏–π —Ç–∞—Ç–∞–ª—Ç—É—É–¥
    await fetchAuthors();
    await fetchNews();
    
    // üí° –£—Ä–∏–∞–ª–≥–∞ Ticker-–∏–π–≥ —ç—Ö–ª“Ø“Ø–ª—ç—Ö
    displayTicker();

    // üí° –¢–∞–±—É—É–¥—ã–≥ “Ø“Ø—Å–≥—ç—ç–¥, “Ø–Ω–¥—Å—ç–Ω —Ö—É—É–¥—Å—ã–≥ —Ö–∞—Ä—É—É–ª–Ω–∞
    generateCategoryTabs();
    showCategory('all'); 
    
    checkUrlForNewsId(); 
}

init();

</script>
</body>
</html>
