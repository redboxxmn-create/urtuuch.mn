<!DOCTYPE html>
<html lang="mn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>–ú—ç–¥—ç—ç - urtuuch.mn</title>
<link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;700&display=swap" rel="stylesheet">
<style>
body { font-family:'Ubuntu',sans-serif; margin:0; padding:0; background:#f8f8f8; color:#333; }
.container { max-width:900px; margin:20px auto; background:#fff; padding:20px; border-radius:12px; box-shadow:0 3px 12px rgba(0,0,0,0.15); }
.news-title { font-size:24px; font-weight:bold; margin-bottom:10px; }
.news-meta { color:#666; font-size:14px; margin-bottom:15px; }
.news-img { width:100%; border-radius:10px; margin-bottom:15px; }
.news-content { font-size:16px; line-height:1.6; white-space:pre-line; }
.author-box { display:flex; align-items:center; margin-top:20px; gap:10px; }
.author-box img { width:45px; height:45px; border-radius:50%; object-fit:cover; }
.author-name { font-weight:bold; }
.back-btn { display:inline-block; margin-top:20px; padding:10px 15px; background:#3d85c6; color:#fff; border-radius:6px; text-decoration:none; font-size:14px; }
</style>
</head>
<body>

<div class="container" id="newsBox">
  –£–Ω—à–∏–∂ –±–∞–π–Ω–∞...
</div>

<script type="module">
import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm'

// üîπ Supabase —Ç–æ—Ö–∏—Ä–≥–æ–æ
const supabaseUrl = 'https://wpotnvekaoosdkvmhqgo.supabase.co';
const supabaseKey = 'PUBLIC_ANON_KEY_HERE'; // ”®”©—Ä–∏–π–Ω Public Key-—ç—ç –æ—Ä—É—É–ª
const supabase = createClient(supabaseUrl, supabaseKey);

// üîπ URL-–∞–∞—Å slug –∞–≤–∞—Ö
const urlParams = new URLSearchParams(window.location.search);
const slug = urlParams.get("slug");

const box = document.getElementById("newsBox");

if(!slug){
    box.innerHTML = "<h2>–ú—ç–¥—ç—ç–Ω–∏–π URL –∑”©–≤ –±–∏—à –±–∞–π–Ω–∞.</h2>";
} else {
    async function loadNews(){
        // üîπ –ú—ç–¥—ç—ç–≥ slug-–∞–∞—Ä –∞–≤–∞—Ö
        const { data: news, error } = await supabase.from('news').select('*').eq('slug', slug).single();
        if(error || !news){
            box.innerHTML = "<h2>–ú—ç–¥—ç—ç –æ–ª–¥—Å–æ–Ω–≥“Ø–π...</h2>";
            return;
        }

        // üîπ Author –º—ç–¥—ç—ç–ª–ª–∏–π–≥ –∞–≤–∞—Ö
        const { data: authors } = await supabase.from('authors').select('*');
        const author = authors.find(a=>a.id === news.author_id);

        // üîπ –ú—ç–¥—ç—ç–≥ —Ö–∞—Ä—É—É–ª–∞—Ö
        box.innerHTML = `
            <h1 class="news-title">${news.title}</h1>
            <div class="news-meta">
                ${news.category} ${news.subcategory? '| ' + news.subcategory : ''} ${news.featured?'| –û–Ω—Ü–ª–æ—Ö':''}
            </div>
            ${news.image? `<img class="news-img" src="${news.image}">` : ''}
            <div class="news-content">${news.description}</div>
            ${author ? `<div class="author-box">
                <img src="${author.image}">
                <div>
                    <div class="author-name">${author.name}</div>
                    <div class="author-title">${author.title}</div>
                </div>
            </div>` : ''}
            <a class="back-btn" href="index.html">–ë—É—Ü–∞—Ö</a>
        `;
    }

    loadNews();
}
</script>

</body>
</html>
