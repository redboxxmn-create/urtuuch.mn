<!DOCTYPE html>
<html lang="mn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Мэдээ</title>
<style>
img{width:100%;max-height:400px;object-fit:cover}
</style>
</head>
<body>

<div id="box">Ачаалж байна...</div>

<script type="module">

import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js/+esm";

const supabase = createClient(
 "https://wpotnvekaoosdkvmhqgo.supabase.co",
 "PUBLIC_ANON_KEY"   "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Indwb3RudmVrYW9vc2Rrdm1ocWdvIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjUwMTU3NjQsImV4cCI6MjA4MDU5MTc2NH0.YIpy_IA9nNseYUJB3Y-adxgv9btgAt5IKP5FJpafNC0"
);

const params = new URLSearchParams(location.search);
const slug = params.get("slug");

async function load(){
   if(!slug){ 
       document.getElementById("box").innerHTML="Мэдээ олдсонгүй"; 
       return;
   }

   let {data,error} = await supabase
      .from("news")
      .select("*")
      .eq("slug",slug)
      .single();

   if(error){ 
       document.getElementById("box").innerHTML="Алдаа гарлаа"; 
       return;
   }

   document.getElementById("box").innerHTML = `
      <h2>${data.title}</h2>
      <div>${data.category}</div>
      ${data.image? `<img src="${data.image}">`:''}
      <div>${data.description}</div>
   `;
}

load();

</script>
</body>
</html>
